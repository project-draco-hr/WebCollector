{
  byte oldVersion=in.readByte();
switch (oldVersion) {
case 0:
case 1:
    url=Text.readString(in);
  base=Text.readString(in);
content=new byte[in.readInt()];
in.readFully(content);
contentType=Text.readString(in);
int keySize=in.readInt();
String key;
for (int i=0; i < keySize; i++) {
key=Text.readString(in);
int valueSize=in.readInt();
for (int j=0; j < valueSize; j++) {
metadata.add(key,Text.readString(in));
}
}
break;
case 2:
url=Text.readString(in);
base=Text.readString(in);
content=new byte[in.readInt()];
in.readFully(content);
contentType=Text.readString(in);
metadata.readFields(in);
break;
default :
throw new VersionMismatchException((byte)2,oldVersion);
}
}
