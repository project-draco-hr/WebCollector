{
  Walker walker=new Walker(base);
  walker.walk(doc);
  String licenseUrl=null;
  String licenseLocation=null;
  if (walker.rdfLicense != null) {
    licenseLocation="rdf";
    licenseUrl=walker.rdfLicense;
  }
 else   if (walker.relLicense != null) {
    licenseLocation="rel";
    licenseUrl=walker.relLicense.toString();
  }
 else   if (walker.anchorLicense != null) {
    licenseLocation="a";
    licenseUrl=walker.anchorLicense.toString();
  }
 else   if (conf.getBoolean("creativecommons.exclude.unlicensed",false)) {
    throw new ParseException("No CC license.  Excluding.");
  }
  if (licenseUrl != null) {
    if (LOG.isInfoEnabled()) {
      LOG.info("CC: found " + licenseUrl + " in "+ licenseLocation+ " of "+ base);
    }
    metadata.add(CreativeCommons.LICENSE_URL,licenseUrl);
    metadata.add(CreativeCommons.LICENSE_LOCATION,licenseLocation);
  }
  if (walker.workType != null) {
    if (LOG.isInfoEnabled()) {
      LOG.info("CC: found " + walker.workType + " in "+ base);
    }
    metadata.add(CreativeCommons.WORK_TYPE,walker.workType);
  }
}
