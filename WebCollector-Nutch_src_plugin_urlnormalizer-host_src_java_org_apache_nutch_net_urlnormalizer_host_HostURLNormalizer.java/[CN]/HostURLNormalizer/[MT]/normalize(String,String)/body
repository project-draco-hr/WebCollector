{
  String host=new URL(urlString).getHost();
  if (hostsMap.containsKey(host)) {
    return replaceHost(urlString,host,hostsMap.get(host));
  }
  String[] hostParts=host.split("\\.");
  StringBuilder hostBuffer=new StringBuilder();
  String wildCardHost=new String();
  hostBuffer.append(hostParts[hostParts.length - 1]);
  for (int i=hostParts.length - 2; i > 0; i--) {
    hostBuffer.insert(0,hostParts[i] + ".");
    wildCardHost="*." + hostBuffer.toString();
    if (hostsMap.containsKey(wildCardHost)) {
      return replaceHost(urlString,host,hostsMap.get(wildCardHost));
    }
  }
  return urlString;
}
