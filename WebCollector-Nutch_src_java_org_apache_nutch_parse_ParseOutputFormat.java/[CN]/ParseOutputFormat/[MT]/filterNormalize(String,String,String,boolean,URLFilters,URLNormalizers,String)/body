{
  if (fromUrl.equals(toUrl)) {
    return null;
  }
  if (ignoreExternalLinks) {
    String toHost;
    try {
      toHost=new URL(toUrl).getHost().toLowerCase();
    }
 catch (    MalformedURLException e) {
      toHost=null;
    }
    if (toHost == null || !toHost.equals(fromHost)) {
      return null;
    }
  }
  try {
    if (normalizers != null) {
      toUrl=normalizers.normalize(toUrl,urlNormalizerScope);
    }
    if (filters != null) {
      toUrl=filters.filter(toUrl);
    }
    if (toUrl == null) {
      return null;
    }
  }
 catch (  Exception e) {
    return null;
  }
  return toUrl;
}
