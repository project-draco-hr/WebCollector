{
  byte[] compressedBytes=GZIPUtils.zip(origBytes);
  System.out.println("original data has len " + origBytes.length);
  System.out.println("compressed data has len " + compressedBytes.length);
  for (int i=compressedBytes.length; i >= 0; i--) {
    byte[] truncCompressed=new byte[i];
    for (int j=0; j < i; j++)     truncCompressed[j]=compressedBytes[j];
    byte[] trunc=GZIPUtils.unzipBestEffort(truncCompressed);
    if (trunc == null) {
      System.out.println("truncated to len " + i + ", trunc is null");
    }
 else {
      System.out.println("truncated to len " + i + ", trunc.length=  "+ trunc.length);
      for (int j=0; j < trunc.length; j++)       if (trunc[j] != origBytes[j])       Assert.assertTrue("truncated/uncompressed array differs at pos " + j + " (compressed data had been truncated to len "+ i+ ")",false);
    }
  }
}
