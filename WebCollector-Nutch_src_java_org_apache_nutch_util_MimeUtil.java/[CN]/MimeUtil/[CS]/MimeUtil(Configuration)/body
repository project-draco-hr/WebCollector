{
  tika=new Tika();
  ObjectCache objectCache=ObjectCache.get(conf);
  MimeTypes mimeTypez=(MimeTypes)objectCache.getObject(MimeTypes.class.getName());
  if (mimeTypez == null) {
    try {
      String customMimeTypeFile=conf.get("mime.types.file");
      if (customMimeTypeFile != null && customMimeTypeFile.equals("") == false) {
        try {
          mimeTypez=MimeTypesFactory.create(conf.getConfResourceAsInputStream(customMimeTypeFile));
        }
 catch (        Exception e) {
          LOG.error("Can't load mime.types.file : " + customMimeTypeFile + " using Tika's default");
        }
      }
      if (mimeTypez == null)       mimeTypez=MimeTypes.getDefaultMimeTypes();
    }
 catch (    Exception e) {
      LOG.error("Exception in MimeUtil " + e.getMessage());
      throw new RuntimeException(e);
    }
    objectCache.setObject(MimeTypes.class.getName(),mimeTypez);
  }
  this.mimeTypes=mimeTypez;
  this.mimeMagic=conf.getBoolean("mime.type.magic",true);
}
