{
  StringBuilder buffer=new StringBuilder();
  NodeList children=node.getChildNodes();
  for (int i=0; i < children.getLength(); i++) {
    if (children.item(i).getNodeType() == Node.TEXT_NODE) {
      buffer.append(children.item(i).getNodeValue());
    }
  }
  Matcher matcher=whitespacePattern.matcher(buffer.toString().trim());
  return matcher.replaceAll(" ").trim();
}
