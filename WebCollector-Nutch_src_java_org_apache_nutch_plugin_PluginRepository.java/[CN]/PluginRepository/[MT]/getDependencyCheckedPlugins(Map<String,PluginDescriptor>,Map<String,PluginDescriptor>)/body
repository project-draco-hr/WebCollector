{
  if (filtered == null) {
    return null;
  }
  Map<String,PluginDescriptor> checked=new HashMap<String,PluginDescriptor>();
  for (  PluginDescriptor plugin : filtered.values()) {
    try {
      checked.putAll(getPluginCheckedDependencies(plugin,all));
      checked.put(plugin.getPluginId(),plugin);
    }
 catch (    MissingDependencyException mde) {
      LOG.warn(mde.getMessage());
    }
catch (    CircularDependencyException cde) {
      LOG.warn(cde.getMessage());
    }
  }
  return new ArrayList<PluginDescriptor>(checked.values());
}
