{
  int c=in.read();
  int value=c;
  if (c != -1 && !(XMLChar.isValid(c)))   value='X';
 else   if (lastBad && c == '<') {
    in.mark(1);
    if (in.read() != '/')     value='X';
    in.reset();
  }
  lastBad=(c == 65533);
  return value;
}
