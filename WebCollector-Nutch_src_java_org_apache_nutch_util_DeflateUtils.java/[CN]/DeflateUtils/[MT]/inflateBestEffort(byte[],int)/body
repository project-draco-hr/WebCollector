{
  ByteArrayOutputStream outStream=new ByteArrayOutputStream(EXPECTED_COMPRESSION_RATIO * in.length);
  Inflater inflater=new Inflater(true);
  InflaterInputStream inStream=new InflaterInputStream(new ByteArrayInputStream(in),inflater);
  byte[] buf=new byte[BUF_SIZE];
  int written=0;
  while (true) {
    try {
      int size=inStream.read(buf);
      if (size <= 0)       break;
      if ((written + size) > sizeLimit) {
        outStream.write(buf,0,sizeLimit - written);
        break;
      }
      outStream.write(buf,0,size);
      written+=size;
    }
 catch (    Exception e) {
      LOG.info("Caught Exception in inflateBestEffort",e);
      break;
    }
  }
  try {
    outStream.close();
  }
 catch (  IOException e) {
  }
  return outStream.toByteArray();
}
